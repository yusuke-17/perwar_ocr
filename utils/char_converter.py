"""
旧字体 → 新字体 変換モジュール

戦前文書に頻出する旧字体を現代の新字体に変換する。
JIS X 0208 の旧字体・新字体対応表をベースに、
戦前公文書で特に頻出する文字を重点的に収録。
"""


# ---------- 旧字体 → 新字体 変換辞書 ----------
# 左が旧字体、右が新字体
# 戦前公文書で頻出するものを中心に収録

OLD_TO_NEW: dict[str, str] = {
    # ア行
    "惡": "悪",
    "壓": "圧",
    "圍": "囲",
    "醫": "医",
    "壹": "壱",
    "逸": "逸",
    "飮": "飲",
    "隱": "隠",
    "營": "営",
    "榮": "栄",
    "衞": "衛",
    "驛": "駅",
    "圓": "円",
    "鹽": "塩",
    "應": "応",
    "歐": "欧",
    "毆": "殴",
    "櫻": "桜",
    "奧": "奥",
    # カ行
    "假": "仮",
    "會": "会",
    "懷": "懐",
    "海": "海",
    "繪": "絵",
    "擴": "拡",
    "殼": "殻",
    "覺": "覚",
    "學": "学",
    "嶽": "岳",
    "樂": "楽",
    "勸": "勧",
    "卷": "巻",
    "寬": "寛",
    "歡": "歓",
    "漢": "漢",
    "關": "関",
    "觀": "観",
    "氣": "気",
    "歸": "帰",
    "龜": "亀",
    "舊": "旧",
    "據": "拠",
    "擧": "挙",
    "虛": "虚",
    "峽": "峡",
    "挾": "挟",
    "狹": "狭",
    "鄕": "郷",
    "曉": "暁",
    "區": "区",
    "驅": "駆",
    "勳": "勲",
    "薰": "薫",
    "惠": "恵",
    "經": "経",
    "繼": "継",
    "藝": "芸",
    "缺": "欠",
    "權": "権",
    "劍": "剣",
    "險": "険",
    "圈": "圏",
    "檢": "検",
    "獻": "献",
    "縣": "県",
    "顯": "顕",
    "驗": "験",
    "嚴": "厳",
    "國": "国",
    "號": "号",
    "黑": "黒",
    # サ行
    "濟": "済",
    "碎": "砕",
    "齋": "斎",
    "劑": "剤",
    "櫻": "桜",
    "册": "冊",
    "殺": "殺",
    "雜": "雑",
    "參": "参",
    "慘": "惨",
    "贊": "賛",
    "殘": "残",
    "絲": "糸",
    "齒": "歯",
    "兒": "児",
    "辭": "辞",
    "濕": "湿",
    "實": "実",
    "寫": "写",
    "釋": "釈",
    "壽": "寿",
    "收": "収",
    "從": "従",
    "澁": "渋",
    "獸": "獣",
    "縱": "縦",
    "祝": "祝",
    "處": "処",
    "暑": "暑",
    "署": "署",
    "諸": "諸",
    "敍": "叙",
    "奬": "奨",
    "將": "将",
    "牀": "床",
    "稱": "称",
    "證": "証",
    "條": "条",
    "狀": "状",
    "乘": "乗",
    "淨": "浄",
    "剩": "剰",
    "疊": "畳",
    "孃": "嬢",
    "讓": "譲",
    "釀": "醸",
    "觸": "触",
    "囑": "嘱",
    "愼": "慎",
    "眞": "真",
    "神": "神",
    "盡": "尽",
    "圖": "図",
    "粹": "粋",
    "醉": "酔",
    "隨": "随",
    "髓": "髄",
    "數": "数",
    "樞": "枢",
    "瀨": "瀬",
    "聲": "声",
    "齊": "斉",
    "靜": "静",
    "竊": "窃",
    "攝": "摂",
    "節": "節",
    "專": "専",
    "戰": "戦",
    "淺": "浅",
    "潛": "潜",
    "纖": "繊",
    "踐": "践",
    "錢": "銭",
    "禪": "禅",
    "曾": "曽",
    "雙": "双",
    "壯": "壮",
    "爭": "争",
    "莊": "荘",
    "搜": "捜",
    "插": "挿",
    "巢": "巣",
    "藏": "蔵",
    "騷": "騒",
    "增": "増",
    "憎": "憎",
    "臟": "臓",
    "屬": "属",
    "續": "続",
    # タ行
    "墮": "堕",
    "體": "体",
    "對": "対",
    "帶": "帯",
    "滯": "滞",
    "臺": "台",
    "瀧": "滝",
    "擇": "択",
    "澤": "沢",
    "擔": "担",
    "單": "単",
    "膽": "胆",
    "團": "団",
    "斷": "断",
    "癡": "痴",
    "遲": "遅",
    "晝": "昼",
    "蟲": "虫",
    "鑄": "鋳",
    "廳": "庁",
    "徵": "徴",
    "聽": "聴",
    "敕": "勅",
    "鎭": "鎮",
    "塚": "塚",
    "遞": "逓",
    "鐵": "鉄",
    "轉": "転",
    "點": "点",
    "傳": "伝",
    "都": "都",
    "燈": "灯",
    "當": "当",
    "黨": "党",
    "盜": "盗",
    "稻": "稲",
    "鬪": "闘",
    "德": "徳",
    "獨": "独",
    "讀": "読",
    # ナ行
    "惱": "悩",
    "腦": "脳",
    "濃": "濃",
    # ハ行
    "拜": "拝",
    "賣": "売",
    "麥": "麦",
    "發": "発",
    "髮": "髪",
    "拔": "抜",
    "繁": "繁",
    "晚": "晩",
    "蠻": "蛮",
    "卑": "卑",
    "祕": "秘",
    "碑": "碑",
    "濱": "浜",
    "賓": "賓",
    "敏": "敏",
    "甁": "瓶",
    "侮": "侮",
    "福": "福",
    "拂": "払",
    "佛": "仏",
    "倂": "併",
    "竝": "並",
    "邊": "辺",
    "變": "変",
    "辯": "弁",
    "辨": "弁",
    "瓣": "弁",
    "舖": "舗",
    "穗": "穂",
    "寶": "宝",
    "豐": "豊",
    "襤": "襤",
    "萬": "万",
    # マ行
    "滿": "満",
    "默": "黙",
    "彌": "弥",
    "譯": "訳",
    "藥": "薬",
    "與": "与",
    "豫": "予",
    "餘": "余",
    # ヤ行
    "譽": "誉",
    "搖": "揺",
    "樣": "様",
    "謠": "謡",
    # ラ行
    "來": "来",
    "賴": "頼",
    "亂": "乱",
    "覽": "覧",
    "龍": "竜",
    "兩": "両",
    "獵": "猟",
    "綠": "緑",
    "淚": "涙",
    "壘": "塁",
    "類": "類",
    "禮": "礼",
    "靈": "霊",
    "齡": "齢",
    "歷": "歴",
    "戀": "恋",
    "爐": "炉",
    "勞": "労",
    "朗": "朗",
    "廊": "廊",
    "樓": "楼",
    "錄": "録",
    # ワ行
    "灣": "湾",
}


def convert_old_to_new(text: str) -> str:
    """
    テキスト中の旧字体を新字体に変換する

    Args:
        text: 変換対象のテキスト

    Returns:
        新字体に変換されたテキスト
    """
    for old_char, new_char in OLD_TO_NEW.items():
        text = text.replace(old_char, new_char)
    return text


def find_old_chars(text: str) -> list[tuple[str, str, int]]:
    """
    テキスト中に含まれる旧字体を検出する

    Args:
        text: 検査対象のテキスト

    Returns:
        (旧字体, 新字体, 出現位置) のリスト
    """
    found = []
    for i, char in enumerate(text):
        if char in OLD_TO_NEW:
            found.append((char, OLD_TO_NEW[char], i))
    return found
